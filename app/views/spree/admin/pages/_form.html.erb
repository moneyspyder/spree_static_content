<% content_for :page_actions do %>
  <%= button_link_to Spree.t(:back_to_resource_list, resource: plural_resource_name(Spree::Page)), spree.admin_pages_path, icon: 'arrow-left', class: 'btn-primary' %>
<% end %>

<%= form_for [:admin, @page] do |f| %>
<div class="row" data-hook="admin_page_form_fields">
  <div class="col-md-6" data-hook="admin_page_form_left">
    <div class="form-group field">
      <%= f.label :title %> <span class="required">*</span><br />
      <%= f.text_field :title, :class => 'form-control title' %>
      <%= f.error_message_on :title %>
    </div>

    <div class="form-group field">
      <%= f.label :slug %> <span class="required">*</span><br />
      <%= f.text_field :slug, :class => 'form-control title' %>
      <%= f.error_message_on :slug %>
    </div>

    <% unless f.object.layout.present? %>
      <div class="form-group field">
        <%= f.label :body %> <span class="required">*</span><br />
        <%= f.text_area :body, {rows: 12, :class => 'form-control'} %>
        <%= f.error_message_on :body %>
      </div>
    <% end %>
    <div class="form-group field">
      <%= f.label :layout %>
      <% if f.object.render_layout_as_partial %>
        <% layouts = %w{plain legal multi_1}.collect{ |l| [l, l] } %>
        <%= f.select :layout, layouts, {:include_blank => ""}, :class => 'form-control' %>
      <% else %>
        <%= f.text_field :layout, :class => 'form-control' %>
      <% end %>
    </div>

    <div class="form-group field">
      <%= f.label :foreign_link %><br />
      <%= f.text_field :foreign_link, :class => 'form-control' %>
    </div>

    <div class="form-group field">
      <%= f.label :meta_title %><br />
      <%= f.text_field :meta_title, :class => 'form-control' %>
      <%= f.error_message_on :meta_title %>
    </div>

    <div class="form-group field">
      <%= f.label :meta_keywords %><br />
      <%= f.text_field :meta_keywords, :class => 'form-control' %>
      <%= f.error_message_on :meta_keywords %>
    </div>

    <div class="form-group field">
      <%= f.label :meta_description %><br />
      <%= f.text_field :meta_description, :class => 'form-control' %>
      <%= f.error_message_on :meta_description %>
    </div>    

  </div>

<!--     <div class="form-group field">
      <%= f.label :position %><br />
      <%= f.number_field :position, :min => 0, :class => 'fullwidth title' %>
    </div> -->
<!--
    <div class="form-group field">
      <%= f.check_box :show_in_sidebar %>
      <%= f.label :show_in_sidebar %>
    </div>

    <div class="form-group field">
      <%= f.check_box :show_in_header %>
      <%= f.label :show_in_header %>
    </div

    <div class="form-group field">
      <%= f.check_box :show_in_footer %>
      <%= f.label :show_in_footer %>
    </div>
-->
  <div class="col-md-6" data-hook="admin_page_form_right">

    <div class="form-group field">
      <%= f.check_box :visible %>
      <%= f.label :visible %>
    </div>

    <div class="form-group field">
      <%= f.check_box :render_layout_as_partial %>
      <%= f.label :render_layout_as_partial %>
    </div>

    <% if Spree::Store.count > 1 %>
      <div class="form-group field">

        <%= f.label :stores, Spree.t(:stores)%><br />
        <% Spree::Store.all.each do |store| %>
          <%= check_box_tag "page[store_ids][]", store.id, @page.stores.include?(store) %> <%= store.name %>
        <% end %>
      </div>
    <% else %>
      <%= hidden_field_tag 'page[store_ids][]', Spree::Store.first.id %>
    <% end %>

    </div>
  <!-- </div> -->
</div>

<% unless f.object.layout.blank? %>
  <div class="row">
    <%= render 'spree/admin/pages/layout/'+f.object.layout, f: f %>
  </div>
<% end %>
<%= render "spree/admin/shared/#{@page.new_record? ? 'new' : 'edit'}_resource_links" %>
<% end %>
